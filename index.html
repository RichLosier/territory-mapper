<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="TerritoryPro - Cartographie Territoriale Intelligence pour √©quipes de vente">
    <title>TerritoryPro - Territory Mapping Tool</title>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Styles -->
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/map.css">
    <link rel="stylesheet" href="styles/sidebar.css">
    <link rel="stylesheet" href="styles/modals.css">
    <link rel="stylesheet" href="styles/reps.css">
    <link rel="stylesheet" href="styles/csv-upload.css">
    <link rel="stylesheet" href="styles/mobile.css">
</head>
<body>
    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         HEADER / TOP BAR
         ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <header class="top-bar">
        <div class="top-bar-left">
            <h1 class="app-title">TerritoryPro</h1>
        </div>
        <div class="top-bar-center">
            <!-- Search bar sera ajout√©e Phase 6 -->
        </div>
        <div class="top-bar-right">
            <button class="btn-secondary btn-small" id="btn-upload-csv" style="margin-right: 8px;">
                üì§ Upload CSV
            </button>
            <button class="btn-icon" id="btn-settings" aria-label="Param√®tres">
                ‚öôÔ∏è
            </button>
            <button class="btn-icon" id="btn-help" aria-label="Aide">
                ?
            </button>
        </div>
    </header>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         MAIN LAYOUT
         ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <div class="main-container">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <!-- Sidebar content sera ajout√© progressivement -->
            <div class="sidebar-header">
                <h2>Territoires</h2>
                <div style="display: flex; gap: 8px;">
                    <button class="btn-secondary btn-small" id="btn-upload-csv-sidebar" title="Upload CSV">
                        üì§
                    </button>
                    <button class="btn-primary btn-small" id="btn-add-rep">
                        + Add Rep
                    </button>
                </div>
            </div>
            
            <div class="sidebar-content">
                <!-- Region Selector -->
                <div class="sidebar-section">
                    <div class="sidebar-section-header">R√âGION</div>
                    <select id="select-region" class="form-input" style="width: 100%; margin-bottom: 12px;">
                        <option value="">S√©lectionner une r√©gion</option>
                        <option value="Ontario">Ontario</option>
                        <option value="Qu√©bec">Qu√©bec</option>
                    </select>
                    <button class="btn-primary btn-small" id="btn-scan-dealers" style="width: 100%;" disabled>
                        üîç Scan All Dealers
                    </button>
                    <p class="text-small" id="scan-status" style="margin-top: 8px; text-align: center;">
                        Aucune r√©gion s√©lectionn√©e
                    </p>
                </div>
                
                <div class="sidebar-divider"></div>
                
                <!-- Reps List -->
                <div id="reps-list-container">
                    <div class="empty-state">
                        <p>üë§ Aucun repr√©sentant pour le moment.</p>
                        <p class="text-small">Cliquez sur "+ Add Rep" pour commencer.</p>
                    </div>
                </div>
            </div>
        </aside>

        <!-- Map Container -->
        <div class="map-container" id="map-container">
            <div id="map" class="map"></div>
            <div class="map-overlay">
                <!-- Loading spinner sera ajout√© -->
                <div class="loading-spinner" id="loading-spinner" style="display: none;">
                    <div class="spinner"></div>
                    <p>Chargement de la carte...</p>
                </div>
            </div>
        </div>
    </div>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         MODALS
         ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    
    <!-- Settings Modal -->
    <div class="modal" id="modal-settings" role="dialog" aria-labelledby="modal-settings-title" aria-hidden="true">
        <div class="modal-overlay"></div>
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h2 id="modal-settings-title">‚öôÔ∏è Param√®tres</h2>
                <button class="btn-icon btn-close" id="btn-close-settings" aria-label="Fermer">
                    ‚úï
                </button>
            </div>
            <div class="modal-body">
                <div class="settings-tabs">
                    <button class="tab-btn active" data-tab="api-keys">API Keys</button>
                    <button class="tab-btn" data-tab="display">Affichage</button>
                    <button class="tab-btn" data-tab="data">Donn√©es</button>
                    <button class="tab-btn" data-tab="team">√âquipe</button>
                    <button class="tab-btn" data-tab="integrations">Int√©grations</button>
                    <button class="tab-btn" data-tab="help">Aide</button>
                </div>

                <!-- Tab: API Keys -->
                <div class="tab-content active" id="tab-api-keys">
                    <div class="api-setup-info">
                        <p><strong>üìù Instructions rapides:</strong></p>
                        <ol style="margin-left: 20px; margin-top: 8px;">
                            <li>Allez sur <a href="https://console.cloud.google.com/google/maps-apis" target="_blank">Google Cloud Console</a></li>
                            <li>Cr√©ez un projet ‚Üí Activez "Maps JavaScript API" et "Places API"</li>
                            <li>Cr√©ez une cl√© API ‚Üí Collez-la ci-dessous</li>
                        </ol>
                    </div>

                    <div class="form-group">
                        <label for="input-maps-key">
                            Google Maps JavaScript API Key:
                        </label>
                        <div class="input-with-actions">
                            <input 
                                type="password" 
                                id="input-maps-key" 
                                class="form-input"
                                placeholder="Collez votre cl√© API ici"
                            >
                            <button class="btn-icon" id="btn-toggle-maps-key" aria-label="Afficher/Masquer">
                                üëÅÔ∏è
                            </button>
                            <button class="btn-secondary" id="btn-test-maps-key">
                                Test
                            </button>
                        </div>
                        <div class="status-indicator" id="status-maps-key">
                            <span class="status-text">Non configur√©</span>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="input-places-key">
                            Google Places API Key:
                            <span class="text-small" style="font-weight: normal; color: var(--text-secondary);">
                                (peut √™tre la m√™me cl√©)
                            </span>
                        </label>
                        <div class="input-with-actions">
                            <input 
                                type="password" 
                                id="input-places-key" 
                                class="form-input"
                                placeholder="Collez votre cl√© API ici (ou laissez vide pour utiliser la m√™me)"
                            >
                            <button class="btn-icon" id="btn-toggle-places-key" aria-label="Afficher/Masquer">
                                üëÅÔ∏è
                            </button>
                            <button class="btn-secondary" id="btn-test-places-key">
                                Test
                            </button>
                        </div>
                        <div class="status-indicator" id="status-places-key">
                            <span class="status-text">Non configur√©</span>
                        </div>
                        <button class="btn-secondary btn-small" id="btn-use-same-key" style="margin-top: 8px;">
                            üìã Utiliser la m√™me cl√© que Maps
                        </button>
                    </div>

                    <div class="form-actions">
                        <button class="btn-primary" id="btn-save-keys">
                            Enregistrer les cl√©s
                        </button>
                        <button class="btn-secondary" id="btn-clear-keys">
                            Effacer les cl√©s
                        </button>
                    </div>
                </div>

                <!-- Autres tabs seront ajout√©s dans phases suivantes -->
                <div class="tab-content" id="tab-display" style="display: none;">
                    <p>Section Affichage - √Ä venir</p>
                </div>
                <div class="tab-content" id="tab-data" style="display: none;">
                    <p>Section Donn√©es - √Ä venir</p>
                </div>
                <div class="tab-content" id="tab-team" style="display: none;">
                    <p>Section √âquipe - √Ä venir</p>
                </div>
                <div class="tab-content" id="tab-integrations" style="display: none;">
                    <p>Section Int√©grations - √Ä venir</p>
                </div>
                <div class="tab-content" id="tab-help" style="display: none;">
                    <p>Section Aide - √Ä venir</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Help Modal -->
    <div class="modal" id="modal-help" role="dialog" aria-labelledby="modal-help-title" aria-hidden="true">
        <div class="modal-overlay"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modal-help-title">Aide</h2>
                <button class="btn-icon btn-close" id="btn-close-help" aria-label="Fermer">
                    ‚úï
                </button>
            </div>
            <div class="modal-body">
                <p>Guide d'utilisation - √Ä venir</p>
            </div>
        </div>
    </div>

    <!-- Upload CSV Modal -->
    <div class="modal" id="modal-upload-csv" role="dialog" aria-labelledby="modal-upload-csv-title" aria-hidden="true">
        <div class="modal-overlay"></div>
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h2 id="modal-upload-csv-title">üì§ Upload CSV</h2>
                <button class="btn-icon btn-close" id="btn-close-upload-csv" aria-label="Fermer">
                    ‚úï
                </button>
            </div>
            <div class="modal-body">
                <div class="upload-instructions">
                    <p><strong>Format CSV accept√©:</strong></p>
                    <p class="text-small">Rep, RepEmail, RepPhoto, Client, ClientAddress, ClientCity, ClientPostal, ClientPhone, ClientSince</p>
                    <p class="text-small" style="margin-top: 8px;">
                        <a href="example-data.csv" download>üì• T√©l√©charger un exemple CSV</a>
                    </p>
                </div>
                
                <div class="upload-zone" id="upload-zone">
                    <input type="file" id="input-csv-file" accept=".csv" style="display: none;">
                    <div class="upload-zone-content">
                        <div class="upload-icon">üìÑ</div>
                        <p><strong>Glissez-d√©posez votre fichier CSV ici</strong></p>
                        <p class="text-small">ou</p>
                        <button class="btn-primary" id="btn-browse-csv">
                            Parcourir les fichiers
                        </button>
                        <p class="text-small" style="margin-top: 12px;">
                            Formats accept√©s: .csv (max 10MB)
                        </p>
                    </div>
                </div>
                
                <div class="upload-progress" id="upload-progress" style="display: none;">
                    <div class="progress-bar">
                        <div class="progress-fill" id="progress-fill"></div>
                    </div>
                    <p class="text-small" id="progress-text">Traitement en cours...</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Review Matches Modal -->
    <div class="modal" id="modal-review-matches" role="dialog" aria-labelledby="modal-review-matches-title" aria-hidden="true">
        <div class="modal-overlay"></div>
        <div class="modal-content modal-large" style="max-width: 1000px; max-height: 90vh;">
            <div class="modal-header">
                <h2 id="modal-review-matches-title">üîç Review Matches</h2>
                <button class="btn-icon btn-close" id="btn-close-review-matches" aria-label="Fermer">
                    ‚úï
                </button>
            </div>
            <div class="modal-body" style="overflow-y: auto;">
                <div class="review-summary">
                    <div class="summary-item success">
                        <span class="summary-icon">‚úÖ</span>
                        <div>
                            <strong>12</strong>
                            <p class="text-small">Auto-matched</p>
                        </div>
                    </div>
                    <div class="summary-item warning">
                        <span class="summary-icon">‚ùì</span>
                        <div>
                            <strong>5</strong>
                            <p class="text-small">Review Required</p>
                        </div>
                    </div>
                    <div class="summary-item error">
                        <span class="summary-icon">‚ùå</span>
                        <div>
                            <strong>2</strong>
                            <p class="text-small">No Match Found</p>
                        </div>
                    </div>
                </div>

                <!-- Section AUTO-MATCHED -->
                <div class="review-section">
                    <h3 class="review-section-title success">
                        ‚úÖ AUTO-MATCHED (12)
                    </h3>
                    <div class="review-list" id="review-matched-list">
                        <!-- Items seront g√©n√©r√©s dynamiquement -->
                    </div>
                </div>

                <!-- Section REVIEW REQUIRED -->
                <div class="review-section">
                    <h3 class="review-section-title warning">
                        ‚ùì REVIEW REQUIRED (5)
                    </h3>
                    <div class="review-list" id="review-required-list">
                        <!-- Items seront g√©n√©r√©s dynamiquement -->
                    </div>
                </div>

                <!-- Section NO MATCH FOUND -->
                <div class="review-section">
                    <h3 class="review-section-title error">
                        ‚ùå NO MATCH FOUND (2)
                    </h3>
                    <div class="review-list" id="review-no-match-list">
                        <!-- Items seront g√©n√©r√©s dynamiquement -->
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-secondary" id="btn-cancel-review">
                    Annuler
                </button>
                <button class="btn-primary" id="btn-confirm-review">
                    Confirmer & Importer (12)
                </button>
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div class="toast-container" id="toast-container"></div>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         SCRIPTS
         ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    
    <!-- Google Maps API - Sera charg√© dynamiquement avec la cl√© API -->
    <script src="js/utils.js"></script>
    <script src="js/storage.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/map.js"></script>
    <script src="js/territories.js"></script>
    <script src="js/reps.js"></script>
    <script src="js/clients.js"></script>
    <script src="js/dealers.js"></script>
    <script src="js/csv-upload.js"></script>
    <script src="js/app.js"></script>
</body>
</html>

